/*! Lazy.JS - v1.0.0 - 2014-07-01
 * Lightweight lazy loader for JS, CSS & LESS assets.
 * http://orenyakobi.github.io/lazy
 *
 * Copyright (c) 2014 Oren yakobi <orenykb@gmail.com>;
 * Licensed under the MIT license */
var modlazy=(function(){var a={};return{load:function(b,f){var r=function(i){return function(){for(var t=0,s=b.length;t<s;t++){if(b[t]===i){b.splice(t>0?t--:t,1)}}if(!b.length){f()}}};var l=function(i){var s={};s.ext=e(i);if(s.ext){s.path=i.split(/\#|\?/)[0];return s}else{return false}};var e=function(i){var s=i.split(/\#|\?/)[0].split(".").pop();if(!/^\w+$/.test(s)){g("File extension is not specified ( "+i+" )");return false}else{return s}};var p=function(i){switch(i.ext){case"css":var s=document.createElement("link");s.href=i.path;s.rel="stylesheet";return s;case"js":var s=document.createElement("script");s.src=i.path;s.type="text/javascript";return s;case"less":var s=document.createElement("style");s.id="lazyStyle";return s;default:g("Unsupported extension ( "+ext+" )");return false}};var g=function(i){console.log("~ ModLazy Error: "+i)};var d=function(){if(window.XMLHttpRequest){var i=new XMLHttpRequest()}else{if(window.ActiveXObject){var i=new ActiveXObject("Microsoft.XMLHTTP")}}if(i===null){g("Your browser does not support XMLHTTP")}return i};var c=function(v,t,u,w,s,i){if(v==-1||v>0){setTimeout(function(){i=w()?1:0;c(i?0:v>0?--v:v,t+(u?u:0),u,w,s,i)},i||t<0?0.1:t)}else{if(typeof s=="function"){setTimeout(s,1)}}};var k=function(t,i,s){if(typeof t!="object"){return false}if(t.addEventListener){t.addEventListener(i,s,false);return true}if(t.attachEvent){t.attachEvent("on"+i,s);return true}return false};var o=function(t,w,i){i=i===undefined?0:i;var s=t.split("|");var v=s[i];if(typeof a[v]==="undefined"){var u=l(v);if(u){j(u,w,t,i)}}};var j=function(w,x,v,i){a[w.path]=1;if(w.ext==="less"){q(w,x)}else{var y=p(w),s=false,u=document.getElementsByTagName("head")[0];u.appendChild(y);if(w.ext==="css"){var t=document.createElement("img");t.onerror=function(){if(typeof x!=="undefined"){x()}};t.src=w.path}else{y.onload=y.onreadystatechange=function(){if(!s&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){s=true;y.onload=y.onreadystatechange=null;if(u&&y.parentNode){u.removeChild(y)}if(typeof x!=="undefined"){x()}}};k(y,"error",function(){if(v.split("|").length>1&&i<v.split("|").length-1){o(v,x,i+1)}else{}});c(15,1000,0,function(){return y.id=="loaded"},function(){if(y.id!="loaded"){if(v.split("|").length>1&&i<v.split("|").length-1){o(v,x,i+1)}else{}}})}}};var q=function(s,t){if(typeof less!=="undefined"){a[s.path]=1;var i=d();i.onreadystatechange=function(){if(i.readyState===4){var u=new less.Parser();u.parse(i.responseText,function(x,v){var w=v.toCSS();if(!document.getElementById("lazyStyle")){var y=p(s);document.getElementsByTagName("head")[0].appendChild(y)}document.getElementById("lazyStyle").innerHTML=document.getElementById("lazyStyle").innerHTML+w});if(typeof t!=="undefined"){t()}}};i.open("GET",s.path,true);i.send(null)}else{g("Can't load .less file, less.js is missing")}};b=b instanceof Array?b:[b];for(var m=0,n=b.length;m<n;m++){var h=b[m].replace(/\s+/g,"");if(h.lastIndexOf("<")>2){(function(){var i=b[m];var s=h.split("<");return(function t(){if(s.length){o(s.pop(),t)}else{r(i)()}})()})()}else{o(h,r(b[m]))}}}}})();